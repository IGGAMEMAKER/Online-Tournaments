//

mixin drawRegs(msg)
	each val in msg
		+drawReg(val)
mixin drawReg(val)
	tr 
		td 
			+tLink(val.tournamentID)
		//td #{val.promo}
		td регистрация

mixin tLink(id)
	a(href="TournamentInfo?tID="+id) #{id}


///Dublicate from ShowGifts.jade
mixin ShowGift(gift,add)
	td
		center
			h2!= gift.name
		
			//p!='URL = '+gift.photoURL
			img(src= gift.photoURL display=block max-width='300px' width='400px')
			br
			- if (gift.URL)
				a(href=gift.URL) Show more
			p!=gift.description
			p!=gift.price+'$'
			//p!= '----------------------------'

mixin showGifts(gifts)
	table
		each val, index in gifts
			if(index%3==0 && index!=0)
				tr
					+ShowGift(val)
			else
				+ShowGift(val)

mixin drawPrizes2(giftIDList, gifts)
	if giftIDList && gifts
		table
			each gft, index in giftIDList
				//p!= JSON.stringify(gft)
				- for (var i=0;i<gifts.length;i++)
					if gft.giftID == gifts[i]._id
						tr
							+ShowGift(gifts[i])
						//
							if(index%3==0)
								//tr
									td
										p TR
										//+ShowGift(gifts[i])
							else
								+ShowGift(gifts[i])
		
///-----
mixin buttonLink(link, text)
	form(action=link) 
		input(type="submit" value=text style="width:125px;height:50px;")

mixin drawPrizes(gifts)
	h2 Prizes:
	if gifts && gifts.length>0
		+showGifts(gifts)
	else
		h3 You have no prizes, but it's high time to win them!

mixin moneyOperations()
	//a(href="MoneyTransfers") Money HISTORY
	br
	//table(width="300px")
		tr
			td
				+buttonLink('Deposit', 'Deposit money')
			td
				+buttonLink('Cashout', 'Cashout')
	br

mixin info()
	include templates/account
	//div(class="bloc l-bloc bgc-white bloc-tile-2" id="bloc-4")
		div(class="container bloc-lg")
			div(class="row")
				div(class="col-sm-12")
					h4(class="mg-md") Имя : smh
					h4(class="mg-md") email: 123@gmail.com

mixin drawTournamentRegs(tournaments)
	div(class="bloc l-bloc bgc-white bloc-tile-2" id="bloc-6")
		div(class="container bloc-lg")
			div(class="row")
				div(class="col-sm-12")
					if tournaments
						center
							table(class="table table-bordered table-striped" style="width:50%;")
								thead
									tr
										th №
										//th Приглашён
										th Статус
					
								tbody
									+drawRegs(tournaments)

mixin changePass()
	include templates/changepassword

mixin deposit()
	include templates/deposit

mixin cashout()
	include templates/cashout

html
	head
		include templates/head
	//p!= JSON.stringify(msg.gifts)(msg.userGifts)
	
	//script(src="loadProfile.js")
	
	div(class="page-container")
		include client
		+title("Профиль")
		div(class="bloc l-bloc bgc-white b-divider" id="hq1")
			div(class="container bloc-sm")
				+small_title("Мои турниры")
				div(class="bloc-group")
					+drawTournamentRegs(msg.tournaments)

				div(class="bloc-group")
					+info()
					+changePass()

				+title("Денежные операции")
				div(class="bloc-group")
					+deposit()
					+cashout()
		include templates/footer
