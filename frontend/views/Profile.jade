//

mixin drawRegs(msg)
	each val in msg
		+drawReg(val)
mixin drawReg(val)
	tr 
		td #{val.tournamentID}
		td #{val.promo}

///Dublicate from ShowGifts.jade
mixin ShowGift(gift,add)
	td
		center
			h2!= gift.name
		
			//p!='URL = '+gift.photoURL
			img(src= gift.photoURL display=block max-width='300px' width='400px')
			br
			- if (gift.URL)
				a(href=gift.URL) Show more
			p!=gift.description
			p!=gift.price+'$'
			//p!= '----------------------------'

mixin showGifts(gifts)
	table
		each val, index in gifts
			if(index%3==0 && index!=0)
				tr
					+ShowGift(val)
			else
				+ShowGift(val)

mixin drawPrizes2(giftIDList, gifts)
	table
		each gft, index in giftIDList
			//p!= JSON.stringify(gft)
			- for (var i=0;i<gifts.length;i++)
				if gft.giftID == gifts[i]._id
					tr
						+ShowGift(gifts[i])
					//
						if(index%3==0)
							//tr
								td
									p TR
									//+ShowGift(gifts[i])
						else
							+ShowGift(gifts[i])
		
///-----
mixin buttonLink(link, text)
	form(action=link) 
		input(type="submit" value=text style="width:125px;height:50px;")
mixin drawTournamentRegs(tournaments)
	h2 My tournaments
	table( BORDER="1" CELLPADDING="10" CELLSPACING="0" BORDERCOLOR="000000")
		tr
			td TournamentID
			td Promoted by(Status)
		+drawRegs(tournaments)

mixin drawPrizes(gifts)
	h2 Prizes:
	if gifts && gifts.length>0
		+showGifts(gifts)
	else
		h3 You have no prizes, but it's high time to win them!

mixin moneyOperations()
	table(width="300px")
		tr
			td
				+buttonLink('Deposit', 'Deposit money')
				//a(href="Deposit") Deposit money
			td
				+buttonLink('Cashout', 'Cashout')
	br

html
	//p!= JSON.stringify(message.gifts)
	//br
	//p!= JSON.stringify(message.userGifts)
	//p asd
	center
		h1 Profile of  #{session.login}
		h2 You have #{message.money/100}$ on your account
		
		+moneyOperations()

		a(href="Tournaments") Back to tournaments
		+drawTournamentRegs(message.tournaments)

		//+drawPrizes(message.userGifts)
		+drawPrizes2(message.gifts, message.userGifts)
